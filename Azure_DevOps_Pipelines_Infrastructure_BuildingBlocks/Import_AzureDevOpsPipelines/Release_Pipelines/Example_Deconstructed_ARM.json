{"source":2,"revision":15,"description":null,"createdBy":{"displayName":"Jim Riekse","url":"https://spsprodcus2.vssps.visualstudio.com/Abdab41d2-5971-43f1-82b6-ddf33aa18cf2/_apis/Identities/1d1e1f67-48ac-6a99-9a98-0b415b2def73","_links":{"avatar":{"href":"https://dev.azure.com/jriekse5555/_apis/GraphProfile/MemberAvatars/aad.MWQxZTFmNjctNDhhYy03YTk5LTlhOTgtMGI0MTViMmRlZjcz"}},"id":"1d1e1f67-48ac-6a99-9a98-0b415b2def73","uniqueName":"jiriekse@microsoft.com","imageUrl":"https://dev.azure.com/jriekse5555/_apis/GraphProfile/MemberAvatars/aad.MWQxZTFmNjctNDhhYy03YTk5LTlhOTgtMGI0MTViMmRlZjcz","descriptor":"aad.MWQxZTFmNjctNDhhYy03YTk5LTlhOTgtMGI0MTViMmRlZjcz"},"createdOn":"2019-04-08T00:39:04.613Z","modifiedBy":{"displayName":"Jim Riekse","url":"https://spsprodcus2.vssps.visualstudio.com/Abdab41d2-5971-43f1-82b6-ddf33aa18cf2/_apis/Identities/1d1e1f67-48ac-6a99-9a98-0b415b2def73","_links":{"avatar":{"href":"https://dev.azure.com/jriekse5555/_apis/GraphProfile/MemberAvatars/aad.MWQxZTFmNjctNDhhYy03YTk5LTlhOTgtMGI0MTViMmRlZjcz"}},"id":"1d1e1f67-48ac-6a99-9a98-0b415b2def73","uniqueName":"jiriekse@microsoft.com","imageUrl":"https://dev.azure.com/jriekse5555/_apis/GraphProfile/MemberAvatars/aad.MWQxZTFmNjctNDhhYy03YTk5LTlhOTgtMGI0MTViMmRlZjcz","descriptor":"aad.MWQxZTFmNjctNDhhYy03YTk5LTlhOTgtMGI0MTViMmRlZjcz"},"modifiedOn":"2019-06-01T16:06:52.530Z","isDeleted":false,"variables":{"adminPassword":{"value":"P@ssw0rd123456"},"adminUserName":{"value":"LocalUser"},"deploymentType":{"value":"dev"},"location":{"value":"eastus"},"osSKU":{"value":"2016-Datacenter"},"publicIpNamePrefix":{"value":"BuildingBlocks2-pip"},"ResourceGroup":{"value":"BuildingBlocks"},"storageType":{"value":"Standard_LRS"},"subnetDevName":{"value":"BuildingBlocks2-dev"},"subnetDevRange":{"value":"10.2.1.0/24"},"subnetProdRange":{"value":"10.2.2.0/24"},"vmName":{"value":"BuildingBlocks2"},"vmNicName":{"value":"BuildingBlocks2-nic"},"vmSize":{"value":"Standard_B2s"},"vNet":{"value":"BuildingBlocks2"},"vNetRange":{"value":"10.2.0.0/16"}},"variableGroups":[],"environments":[{"id":15,"name":"Stage 1","rank":1,"owner":{"displayName":"Jim Riekse","url":"https://spsprodcus2.vssps.visualstudio.com/Abdab41d2-5971-43f1-82b6-ddf33aa18cf2/_apis/Identities/1d1e1f67-48ac-6a99-9a98-0b415b2def73","_links":{"avatar":{"href":"https://dev.azure.com/jriekse5555/_apis/GraphProfile/MemberAvatars/aad.MWQxZTFmNjctNDhhYy03YTk5LTlhOTgtMGI0MTViMmRlZjcz"}},"id":"1d1e1f67-48ac-6a99-9a98-0b415b2def73","uniqueName":"jiriekse@microsoft.com","imageUrl":"https://dev.azure.com/jriekse5555/_apis/GraphProfile/MemberAvatars/aad.MWQxZTFmNjctNDhhYy03YTk5LTlhOTgtMGI0MTViMmRlZjcz","descriptor":"aad.MWQxZTFmNjctNDhhYy03YTk5LTlhOTgtMGI0MTViMmRlZjcz"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":44}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":45},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":46}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":null,"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":37,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"2.*","name":"Build Virtual Network","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"0d77f11a-d10a-4b2a-9903-ae68126c6b09","action":"Create Or Update Resource Group","resourceGroupName":"BuildingBlocks","location":"East US","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_jriekse5555_InfrastructureAsCode-Powershell/Azure_DevOps_Pipelines_Infrastructure_BuildingBlocks/Modular_Azure_ARM/Modular_ARM/virtualNetwork.json","csmParametersFile":"","overrideParameters":"-vNetName $(vNet) -deploymentType $(deploymentType) -vNetRange $(vnetRange) -subnetDevRange $(subnetDevRange) -subnetDevName $(subnetDevName)","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":"SUBNETID","addSpnToEnvironment":"false"}},{"environment":{},"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"2.*","name":"Get SUBNETID Output Using PowerShell","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"filePath","filePath":"$(System.DefaultWorkingDirectory)/_jriekse5555_InfrastructureAsCode-Powershell/Azure_DevOps_Pipelines_Infrastructure_BuildingBlocks/Modular_Azure_ARM/Azure_Powershell_Converting_ARM_Output_to_Pipeline_Var/Parse-ARMOutput.ps1","arguments":"-JsonOutput '$(SUBNETID)' -Name 'SubnetID'","script":"# Write your powershell commands here.\n\nWrite-Host \"Hello World\"\n\n# Use the environment variables input below to pass secret variables to this script.","errorActionPreference":"stop","failOnStderr":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":""}},{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"2.*","name":"Build Public IP Address","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"0d77f11a-d10a-4b2a-9903-ae68126c6b09","action":"Create Or Update Resource Group","resourceGroupName":"BuildingBlocks","location":"East US","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_jriekse5555_InfrastructureAsCode-Powershell/Azure_DevOps_Pipelines_Infrastructure_BuildingBlocks/Modular_Azure_ARM/Modular_ARM/publicIP.json","csmParametersFile":"","overrideParameters":"-publicIpNamePrefix $(publicIpNamePrefix) -deploymentType $(deploymentType)","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":"PUBLICIPID","addSpnToEnvironment":"false"}},{"environment":{},"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"2.*","name":"Get PUBLICIPID Output Using PowerShell","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"filePath","filePath":"$(System.DefaultWorkingDirectory)/_jriekse5555_InfrastructureAsCode-Powershell/Azure_DevOps_Pipelines_Infrastructure_BuildingBlocks/Modular_Azure_ARM/Azure_Powershell_Converting_ARM_Output_to_Pipeline_Var/Parse-ARMOutput.ps1","arguments":"-JsonOutput '$(PUBLICIPID)' -Name 'publicIPID'","script":"# Write your powershell commands here.\n\nWrite-Host \"Hello World\"\n\n# Use the environment variables input below to pass secret variables to this script.","errorActionPreference":"stop","failOnStderr":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":""}},{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"2.*","name":"Build Virtual Network Interface Card and attach Public IP","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"0d77f11a-d10a-4b2a-9903-ae68126c6b09","action":"Create Or Update Resource Group","resourceGroupName":"BuildingBlocks","location":"East US","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_jriekse5555_InfrastructureAsCode-Powershell/Azure_DevOps_Pipelines_Infrastructure_BuildingBlocks/Modular_Azure_ARM/Modular_ARM/networkInterface.json","csmParametersFile":"","overrideParameters":"-nicName $(vmNicName) -nicApiVersion \"2015-06-15\" -subnetID \"$(SUBNETID)\" -publicIpID \"$(PUBLICIPID)\"","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":"vmNicId","addSpnToEnvironment":"false"}},{"environment":{},"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"2.*","name":"Get VMNICID Output Using PowerShell","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"filePath","filePath":"$(System.DefaultWorkingDirectory)/_jriekse5555_InfrastructureAsCode-Powershell/Azure_DevOps_Pipelines_Infrastructure_BuildingBlocks/Modular_Azure_ARM/Azure_Powershell_Converting_ARM_Output_to_Pipeline_Var/Parse-ARMOutput.ps1","arguments":"-JsonOutput '$(vmNicId)' -Name 'vmNicId'","script":"# Write your powershell commands here.\n\nWrite-Host \"Hello World\"\n\n# Use the environment variables input below to pass secret variables to this script.","errorActionPreference":"stop","failOnStderr":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":""}},{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"2.*","name":"Build Virtual Machine","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"0d77f11a-d10a-4b2a-9903-ae68126c6b09","action":"Create Or Update Resource Group","resourceGroupName":"BuildingBlocks","location":"East US","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_jriekse5555_InfrastructureAsCode-Powershell/Azure_DevOps_Pipelines_Infrastructure_BuildingBlocks/Modular_Azure_ARM/Modular_ARM/virtualMachine.json","csmParametersFile":"","overrideParameters":"-storageType \"$(storageType)\" -vmName \"$(vmName)\" -adminUserName \"$(adminUserName)\" -adminPassword \"$(adminPassword)\"  -location \"$(location)\" -vmSize \"$(vmSize)\" -osSKU \"$(osSKU)\"  -vmNicId \"$(vmNicId)\"","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":"","addSpnToEnvironment":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":112,"url":"https://vsrm.dev.azure.com/jriekse5555/d66d935a-f337-488d-a015-fe8e9522e055/_apis/Release/releases/112","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/jriekse5555/_apis/public/Release/badge/d66d935a-f337-488d-a015-fe8e9522e055/14/15"}],"artifacts":[{"sourceId":"d3f996f9-f3e8-49c4-a826-8661dc135b33:jriekse5555/InfrastructureAsCode-Powershell","type":"GitHub","alias":"_jriekse5555_InfrastructureAsCode-Powershell","definitionReference":{"branch":{"id":"master","name":"master"},"checkoutNestedSubmodules":{"id":"True","name":"Any nested submodules within"},"checkoutSubmodules":{"id":"","name":""},"connection":{"id":"d3f996f9-f3e8-49c4-a826-8661dc135b33","name":"Github Connection"},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionType":{"id":"latestFromBranchType","name":"Latest from the default branch"},"definition":{"id":"jriekse5555/InfrastructureAsCode-Powershell","name":"jriekse5555/InfrastructureAsCode-Powershell"},"fetchDepth":{"id":"","name":""},"gitLfsSupport":{"id":"","name":""},"artifactSourceDefinitionUrl":{"id":"https://github.com/jriekse5555/InfrastructureAsCode-Powershell","name":""}},"isPrimary":true,"isRetained":false}],"triggers":[],"releaseNameFormat":"Release-$(rev:r)","tags":[],"pipelineProcess":{"type":1},"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"ReleaseImport"}},"id":14,"name":"Example_Deconstructed_ARM","path":"\\","projectReference":null,"url":"https://vsrm.dev.azure.com/jriekse5555/d66d935a-f337-488d-a015-fe8e9522e055/_apis/Release/definitions/14","_links":{"self":{"href":"https://vsrm.dev.azure.com/jriekse5555/d66d935a-f337-488d-a015-fe8e9522e055/_apis/Release/definitions/14"},"web":{"href":"https://dev.azure.com/jriekse5555/d66d935a-f337-488d-a015-fe8e9522e055/_release?definitionId=14"}}}